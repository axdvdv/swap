<!DOCTYPE html>
<html lang="en">
<head>
  <title>Swap Online</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <script src="https://unpkg.com/ipfs/dist/index.js"></script>
  <style>
    [al-cloak],
    .al-hide {
      display: none !important;
    }
  </style>
<link href="vendor.css" rel="stylesheet"><link href="app.css" rel="stylesheet"></head>
<body al-app="app">

  <div al-cloak>

    <div al-if="activeRoute.path == '/'">
  <div al-ctrl="main">
    <div class="content-1000">
      <div class="row">
        <div class="col border-right">
          <div class="pr-2">
            <div class="alert alert-warning fs-16" role="alert">
              <div class="d-flex justify-content-between">
                <div>Баланс <b>{{balance}}</b> ETH</div>
                <a href="" data-toggle="modal" data-target="#withdraw_eth">вывести средства</a>
              </div>
              <hr />
              <a href="" al-copy title="скопировать в буффер">{{address}}</a>
            </div>
            <h3 class="pt-4 pb-2">Купить BTC за ETH</h3>
            <form action="" al-submit="createOrder('buy')">
              <div class="form-group">
                <label>Курс</label>
                <div class="input-group mb-3">
                  <input
                    class="form-control"
                    type="type"
                    @input.change_eth_exchange_rate=""
                    al-value="eth_exchange_rate"
                    required
                  >
                  <div class="input-group-append">
                    <span class="input-group-text">ETH</span>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label>Количество <b>BTC</b> которое вы хотите <b>получить</b></label>
                <div class="input-group mb-3">
                  <input
                    class="form-control"
                    type="type"
                    @input.change_btc=""
                    al-value="btc"
                    required
                  >
                  <div class="input-group-append">
                    <span class="input-group-text">BTC</span>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label>Количество <b>ETH</b> которое вы хотите <b>продать</b></label>
                <div class="input-group mb-3">
                  <input
                    class="form-control"
                    type="type"
                    @input.change_eth=""
                    al-value="eth"
                    required
                  >
                  <div class="input-group-append">
                    <span class="input-group-text">ETH</span>
                  </div>
                </div>
              </div>
              <!--div class="form-check">
                <label class="form-check-label">
                  <input
                    id="ch_active"
                    class="form-check-input"
                    type="checkbox"
                    al-init="checked()"
                    al-value="active"
                  />
                  Обьявление активно
                </label>
                <div class="text-muted">поставьте галочку, что бы объявление появилось в онлайне в списке выше</div>
              </div-->
              <div class="pt-3">
                <input type="submit" class="btn btn-primary btn-block" value="Создать объявление">
              </div>
            </form>
          </div>
        </div>
        <div class="col">
          <div class="pl-2">
            <div class="alert alert-warning fs-16" role="alert">
              <div class="d-flex justify-content-between">
                <div>Баланс <b>{{bitcoin_balance}}</b> BTC</div>
                <a href="" data-toggle="modal" data-target="#withdraw_btc">вывести средства</a>
              </div>
              <hr />
              <a href="" al-copy title="скопировать в буффер">{{bitcoin_address}}</a>
            </div>
            <h3 class="pt-4 pb-2">Купить ETH за BTC</h3>
            <form action="" al-submit="createOrder('sell')">
              <div class="form-group">
                <label>Курс</label>
                <div class="input-group mb-3">
                  <input
                    class="form-control"
                    type="type"
                    @input.change_btc_exchange_rate=""
                    al-value="btc_exchange_rate"
                    required
                  >
                  <div class="input-group-append">
                    <span class="input-group-text">ETH</span>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label>Количество <b>ETH</b> которое вы хотите <b>продать</b></label>
                <div class="input-group mb-3">
                  <input
                    class="form-control"
                    type="type"
                    @input.change_sell_eth=""
                    al-value="sell_eth"
                    required
                  >
                  <div class="input-group-append">
                    <span class="input-group-text">ETH</span>
                  </div>
                </div>
              </div>
              <div class="form-group">
                <label>Количество <b>BTC</b> которое вы хотите <b>получить</b></label>
                <div class="input-group mb-3">
                  <input
                    class="form-control"
                    type="type"
                    @input.change_sell_btc=""
                    al-value="sell_btc"
                    required
                  >
                  <div class="input-group-append">
                    <span class="input-group-text">BTC</span>
                  </div>
                </div>
              </div>
              <!--div class="form-check">
                <label class="form-check-label">
                  <input
                    id="sell_ch_active"
                    class="form-check-input"
                    type="checkbox"
                    al-init="sell_checked()"
                    al-value="active"
                  />
                  Обьявление активно
                </label>
                <div class="text-muted">поставьте галочку, что бы объявление появилось в онлайне в списке выше</div>
              </div-->
              <div class="pt-3">
                <input type="submit" class="btn btn-primary btn-block" value="Создать объявление">
              </div>
            </form>
          </div>
        </div>
      </div>

      <hr class="my-5" />

      <div class="row">
        <div class="col border-right">
          <div class="pr-2">
            <div class="d-flex justify-content-between">
              <label>Продают</label>
              <div>Всего: <span>{{total_eth}} ETH</span></div>
            </div>
            <div class="table-responsive">
              <table class="table">
                <thead>
                <tr>
                  <th>Цена</th>
                  <th class="text-right">ETH</th>
                  <th class="text-right">BTC</th>
                  <th class="text-right">-</th>
                </tr>
                </thead>
                <tbody>
                <tr al-repeat="item in orders.items | onlySell">
                  <td>{{item.exchangeRate}}</td>
                  <td class="text-right">{{item.currency1Amount}}</td>
                  <td class="text-right">{{item.currency2Amount}}</td>
                  <td class="text-right"><a href="#" al-link data-link="{{'/btc-to-eth/' + item.id}}">купить</a></td>
                </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="pl-2">
            <div class="d-flex justify-content-between">
              <label>Покупают</label>
              <div>Всего: <span>{{total_btc}} BTC</span></div>
            </div>
            <div class="table-responsive ">
              <table class="table">
                <thead>
                <tr>
                  <th>Цена</th>
                  <th class="text-right">ETH</th>
                  <th class="text-right">BTC</th>
                  <th class="text-right">-</th>
                </tr>
                </thead>
                <tbody>
                <tr al-repeat="item in orders.items | onlyBuy">
                  <td>{{item.exchangeRate}}</td>
                  <td class="text-right">{{item.currency1Amount}}</td>
                  <td class="text-right">{{item.currency2Amount}}</td>
                  <td class="text-right"><a href="#" al-link data-link="{{'/eth-to-btc/' + item.id}}">купить</a></td>
                </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="withdraw_eth" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <form action="" al-submit="send_eth('#withdraw_eth')">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title" id="myModalLabel">Вывести ETH</h4>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>

            </div>
            <div class="modal-body">

              <div class="form-group">
                <label>Адрес</label>
                <div class="input-group mb-3">
                  <input class="form-control" value="" al-value="withdraw_eth_address" required=""   type="text" placeholder="Адрес" onkeyup="this.value = this.value.trim()">

                </div>
              </div>

              <div class="form-group">
                <label>Сумма</label>
                <div class="input-group mb-3">
                  <input class="form-control" onkeyup="this.value=this.value.match(/^[\d.]+$/)" value="" al-init="withdraw_eth_amount = min_withdraw_eth"  al-value="withdraw_eth_amount" required=""
                         type="text" placeholder="Сумма">
                  <div class="input-group-append">
                    <span class="input-group-text">ETH</span>
                  </div>
                </div>
                <p class="list-text">мин: <a href="" @click="withdraw_eth_amount=min_withdraw_eth">{{min_withdraw_eth}}</a>, макс <a href="" @click="withdraw_eth_amount=balance">{{balance}}</a>
                </p>
              </div>

            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Закрыть</button>
              <button type="submit" class="btn btn-primary">Отправить</button>
            </div>
          </div>
        </form>
      </div>
    </div>

    <div class="modal fade" id="withdraw_btc" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
      <div class="modal-dialog" role="document">
        <form action="" al-submit="send_btc('#withdraw_btc')">
          <div class="modal-content">
            <div class="modal-header">
              <h4 class="modal-title" >Вывести BTC</h4>
              <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">

              <div class="form-group">
                <label>Адрес</label>
                <div class="input-group mb-3">
                  <input class="form-control" value="" al-value="withdraw_btc_address" required=""   type="text" placeholder="Адрес" onkeyup="this.value = this.value.trim()">
                </div>
              </div>

              <div class="form-group">
                <label>Сумма</label>
                <div class="input-group mb-3">
                  <input class="form-control"  value="" al-init="withdraw_btc_amount = min_withdraw_btc"  al-value="withdraw_btc_amount"required=""   type="text"  >
                  <div class="input-group-append">
                    <span class="input-group-text">BTC</span>
                  </div>

                </div>
                <p class="list-text">мин: <a href="" @click="withdraw_btc_amount=min_withdraw_btc">{{min_withdraw_btc}}</a>, макс <a href="" @click="withdraw_btc_amount=bitcoin_balance">{{bitcoin_balance}}</a>
                </p>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Закрыть</button>
              <button type="submit" class="btn btn-primary">Отправить</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

    <div al-if="activeRoute.path == '/history'">
  <button al-link="/">Назад</button>

  <div al-ctrl="history">
    <div class="content-1000">

      <div class="page-header">
        <h1>История</h1>
      </div>

      <div class="row">
        <div class="col border-right">
          <div class="pr-2">
            <div class="d-flex justify-content-between">

              <div>Всего: <span>0 ETH</span></div>
            </div>

            <div class="table-responsive">
              <table class="table">
                <thead>
                <tr>
                  <th>BTC</th>
                  <th class="text-right">Address</th>
                  <th class="text-right">Time</th>
                </tr>
                </thead>
                <tbody>

                </tbody>
              </table>
            </div>
          </div>

        </div>
        <div class="col">
          <div class="pr-2">
            <div class="d-flex justify-content-between">

              <div>Всего: <span>{{total_btc}} BTC</span></div>
            </div>

            <div class="table-responsive">
              <table class="table">
                <thead>
                <tr>
                  <th>BTC</th>
                  <th class="text-right">Address</th>
                  <th class="text-right">Time</th>
                </tr>
                </thead>
                <tbody>
                <tr al-repeat="it in btcTransactions">
                  <td>{{it.outputs[0].value / 100000000}}</td>
                  <td>{{it.outputs[0].address}}</td>
                  <td>{{it.time}}</td>

                </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

    <div al-if="activeRoute.path == '/btc-to-eth/:id'">
  <button al-link="/">Назад</button>

  <div al-ctrl="btcToEth">

    <div class="content-800">

      <h2 class="mb-4">1. Придумайте секретную фразу</h2>
      <div class="alert alert-danger" role="alert">
        <b>Сохраните секретную фразу, иначе вы не сможете получить деньги!</b>
      </div>
      <div al-show="data.step == 1">
        <input type="text" class="form-control" placeholder="Секретная фраза" al-value="data.secret">
        <br />
        <button type="button" class="btn btn-primary" @click="goNextStep()">Погнали!</button>
      </div>
      <div class="fs18" al-show="data.step > 1">
        <div class="alert alert-warning" role="alert">
          Secret: <b><a href="" al-copy>{{data.secret}}</a></b>
        </div>
        <div class="alert alert-warning" role="alert">
          Secret Hash: <b><a href="" al-copy>{{data.secretHash}}</a></b>
        </div>
      </div>

      <div class="mt-5" al-show="data.step > 1">
        <h2 class="mb-4">2. Пополните адрес созданного BTC кошелька</h2>
        <div class="alert alert-primary fs-18" role="alert">
          Сумма для пополнения: <b>{{data.order.currency1Amount}} BTC</b>
        </div>
        <div class="alert alert-warning" role="alert">
          Адрес BTC кошелька: <b><a href="" al-copy>{{data.btcScriptAddress}}</a></b>
        </div>
        <button type="button" class="btn btn-primary" @click="goNextStep()">Я пополнил, давай проверяй и погнали дальше!</button>
      </div>

      <div class="mt-5" al-show="data.step > 2">
        <div al-show="data.waitingForUser">
          <h2 class="mb-4">3. Ожидаем пользователя {Username}</h2>
          <div class="sk-fading-circle">
            <div class="sk-circle1 sk-circle"></div>
            <div class="sk-circle2 sk-circle"></div>
            <div class="sk-circle3 sk-circle"></div>
            <div class="sk-circle4 sk-circle"></div>
            <div class="sk-circle5 sk-circle"></div>
            <div class="sk-circle6 sk-circle"></div>
            <div class="sk-circle7 sk-circle"></div>
            <div class="sk-circle8 sk-circle"></div>
            <div class="sk-circle9 sk-circle"></div>
            <div class="sk-circle10 sk-circle"></div>
            <div class="sk-circle11 sk-circle"></div>
            <div class="sk-circle12 sk-circle"></div>
          </div>
        </div>
      </div>

      <div class="mt-5" al-show="data.step > 3">
        <div class="page-header">
          <h1>Step 4</h1>
        </div>
      </div>

    </div>

  </div>
</div>

    <div al-if="activeRoute.path == '/eth-to-btc/:id'">
  <button al-link="/">Назад</button>

  <div al-ctrl="ethToBtc">

  </div>
</div>


  </div>

  <div :hidden="true">
    Loading...
  </div>

<script type="text/javascript" src="vendor.js"></script><script type="text/javascript" src="app.js"></script></body>
</html>
